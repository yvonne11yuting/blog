<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/app.319712d3e7fffa8163a7.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.0.50"/><title data-react-helmet="true">YuTing</title><meta data-react-helmet="true" name="description" content="Yvonne&#x27;s blog"/><link rel="shortcut icon" href="/blog/icons/icon-48x48.png"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#00a5be"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-template-js-9e3bd79d15e1fb918a11.js"/><link as="script" rel="preload" href="/blog/0-02112589401d2e751f04.js"/><link as="script" rel="preload" href="/blog/app-307c5ee6e9ff5d3a31a5.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-5177511170e665f06203.js"/><link rel="preload" href="/blog/static/d/621/path---regex-89-a-c88-RdaaTdyqqTUrfHsZnvaOcLEhGQ.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header class="header"><h1><a href="/blog/">YuTing</a></h1><nav><a href="/blog/posts">文章列表</a><a href="/blog/tags">標籤索引</a></nav></header><main><div class="main-content blog-post"><h1>Regular Expressions</h1><h2>November 24, 2018</h2><div class="blog-post-content"><h2>grep / egrep / fgrep  文本搜尋工具</h2>
<ul>
<li>grep - global regular expression print, 全面搜尋正規表達式並印出來</li>
<li>egrep - grep的擴展</li>
<li>fgrep - fgrep就是fixed grep或fast grep，它們把所有的字母都看作單詞</li>
</ul>
<h2>egrep詮釋字元</h2>
<h3>一行的開始與結尾</h3>
<ul>
<li>^ - 脫字元, caret, 比對行首開頭</li>
<li>$ - 錢, dollar, 比對行末結尾</li>
</ul>
<p><code class="language-text">^cat</code> <br>
不是：<del>會匹配以cat開頭的行</del> <br>
而是：要匹配的話，要先有行首，緊接著c，緊接著a，再緊接著t。</p>
<h3>字元類別</h3>
<h4>匹配特定幾個字元之一 [ae]</h4>
<ul>
<li>[...] - 字元類別(character class) / 隱含“或”的意思</li>
</ul>
<p><code class="language-text">gr[ae]y</code> <br>
解釋：要找到g，後面跟著r，接著跟著e或a，最後再出現y</p>
<ul>
<li>g和r的關係：且接著</li>
<li>[ea]的關係：或</li>
</ul>
<p><code class="language-text">&lt;h[123456]&gt;</code> <br>
解釋：會匹配&#x3C;h1>、&#x3C;h2>、&#x3C;h3>等內容</p>
<h4>字元類別詮釋字元(character-class metacharacter) 「0-9A-Za-z」</h4>
<ul>
<li>- : 連字號，可用來表示一段字元範圍，只有在字元類別([...])內是解釋成詮釋字元</li>
</ul>
<p><code class="language-text">&lt;h[123456]&gt;</code>即等於<code class="language-text">&lt;h[1-6]&gt;</code> <br>
<code class="language-text">[0123456789abcdefABCDEF]</code>即等於<code class="language-text">[0-9a-fA-F]</code>或是<code class="language-text">[A-Fa-f0-9]</code>。
因為範圍之間的<code class="language-text">先後順序並不重要</code> <br>
<code class="language-text">[0-9A-Z_!.?]</code> <br>
解釋：匹配數字、大寫英文字母、底線、驚嘆號、句點或問號</p>
<h4>效果反轉的字元類別 <sup id="fnref-..."><a href="#fn-..." class="footnote-ref">...</a></sup></h4>
<p>如果寫成<sup id="fnref-..."><a href="#fn-..." class="footnote-ref">...</a></sup>而不是[...]的話，類別就會匹配任何<strong>沒有</strong>列出的字元
<code class="language-text">[^1-6]</code> <br>
解釋：匹配1到6以外的任何字元</p>
<p><code class="language-text">egrep &#39;q[^u]&#39; xxx.list</code> <br>
解釋：q後面跟著一個字元，且這個字元不是u
"Qantas"和"Iraq"不會被匹配到，因為：</p>
<ol>
<li>Qantas的"Q"是大寫</li>
<li>Iraq的q後面沒有跟著一個字元，出局！一個字元類別就算反轉了，終究需要一個字元讓它匹配。</li>
</ol>
<h3>以句點匹配任何字元 「.」</h3>
<ul>
<li>「.」這個詮釋字元(通常稱為dot或point)，是<code class="language-text">匹配任何字元</code>的字元類別的簡寫法。當您想在式子裡放一個"允許任何字元"的地方時，就可以使用它</li>
</ul>
<p><code class="language-text">03.19.76</code> <br>
解釋：匹配0，緊接著3，緊接著任何字元，緊接著1，緊接著9，緊接著任何字元，緊接著7，緊接著6
所以說<code class="language-text">03.19.76</code>可能的匹配結果包含<code class="language-text">03/19/76</code>或<code class="language-text">03-19.76</code>或<code class="language-text">03319976</code><br>
<code class="language-text">03[-./]19[-./]76</code><br>
這面這個表達式中，「.」就不是詮釋字元，因為他在字元類別([...])內。 <br>
解釋：匹配0，緊接著3，接著可能是「-」或「.」或「/」，然後再接著1，接著9，接著可能是「-」或「.」或「/」，再接著可能是7，接著6</p>
<h3>選項</h3>
<h4>匹配幾個子表達式之一 (xxx|yyy|kkk)</h4>
<ul>
<li>| 為詮釋字元，代表"或"，它讓我們能夠將多個表達式結合成單一個表達式。 <br>
<code class="language-text">Bob|Robert</code> <br>
解釋：上方表達是一個表達式，不管是Bob或Robert都會匹配。</li>
</ul>
<p><code class="language-text">gr[ea]y</code>等於<code class="language-text">grey|gray</code>等於<code class="language-text">gr(a|e)y</code><br>
<strong>備註：</strong>千萬不要混在一起！</p>
<ul>
<li>"()"小括號是詮釋字元</li>
<li>"[...]"中括號是字元類別，如果"|"在字元類別中出現，則只是普通字元，沒有特殊意義</li>
</ul>
<p><code class="language-text">(Geoff|Jeff)(rey|ery)</code>等於<code class="language-text">(Geo|Je)ff(rey|ery)</code>等於<code class="language-text">(Geo|Je)ff(re|er)y</code><br>
以上三種表達式等於接下來出現的這個=> <code class="language-text">Jeffrey|Geoffery|Jeffery|Geoffrey</code> <br>
雖然比較長但也比較簡單！</p>
<p><code class="language-text">「^From\|Subject\|Date: 」vs.「^(From|Subject|Date): 」</code> <br></p>
<ul>
<li>「^From|Subject|Date: 」:匹配「^From」、「Subject」或「Date: 」</li>
<li>
<p>「^(From|Subject|Date): 」:匹配行首，接著匹配「From」、「Subject」或「Date」三者之一，接著匹配「: 」<br>
文言版解釋： <br></p>
<ol>
<li>行首，跟著F．r．o．m，跟著": " ，或是<br></li>
<li>行首，跟著S．u．b．j．e．c．t，跟著": "，或是<br></li>
<li>行首，跟著D．a．t．e，跟著": "<br>
白話版解釋：<br>
匹配行首開頭是「From: 」、「Subject: 」或「Date: 」的行。<br></li>
</ol>
</li>
</ul>
<p>以下範例：</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">egrep</span> <span class="token string">'^(From|Subject|Date): '</span> mailbox
From: ele@ta.org
Subject: be seenin<span class="token punctuation">..</span>.
Date: Mon, 23 Oct <span class="token punctuation">..</span>.</code></pre></div>
<h3>忽視大小寫差異 -i</h3>
<p>egrep的命令列選項<code class="language-text">&quot;-i&quot;</code>能告訴它進行不區分大小寫的比對，如： <br></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">egrep</span> -i <span class="token string">'^(From|Subject|Date): '</span> mailbox</code></pre></div>
<p>如此一來，連"SUBJECT: MAKE MONEY FAST..."等內容都可以匹配到</p>
<h3>單詞邊界</h3>
<p>註：並不是所有egrep版本都支援單詞邊界 <br>
單詞邊界可以幫助我們在一個句子中找到我們要的詞。 <br>
如果版本有支援的話就可以使用<strong>詮釋序列(metasequences)</strong>「&#x3C;」與「>」。<br>
<code class="language-text">&lt;cat&gt;</code><br>
解釋：假如可以找到單詞的開始位置，後面緊接著cat，後面再緊接著單詞結束位置的話，就匹配。<br>
白話版：找到cat這個單詞。</p>
<h3>整理小結</h3>
<table>
<thead>
<tr>
<th>詮釋字元</th>
<th>名稱</th>
<th>匹配內容</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>句點</td>
<td>任何一個字元</td>
</tr>
<tr>
<td>[...]</td>
<td>字元類別</td>
<td>任何一個列出的字元</td>
</tr>
<tr>
<td>[^...]</td>
<td>反轉字元類別</td>
<td>任何一個沒有列出的字元</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>^</td>
<td>脫字號</td>
<td>行首位置</td>
</tr>
<tr>
<td>$</td>
<td>錢號</td>
<td>行尾位置</td>
</tr>
<tr>
<td>\&#x3C;</td>
<td>反斜線、小於</td>
<td>單字的開始位置(某些egrep版本不支援)</td>
</tr>
<tr>
<td>\></td>
<td>反斜線、大於</td>
<td>單字的結束位置(某些egrep版本不支援)</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>|</td>
<td>或，bar</td>
<td>匹配由它分隔的任一表達式</td>
</tr>
<tr>
<td>(...)</td>
<td>括號</td>
<td>用來限制「|」的範圍，以及一些之後會提到的功能</td>
</tr>
</tbody>
</table>
<h3>可以省略的項目 colou?r</h3>
<ul>
<li>? (問號，question mark)為詮釋字元，只對緊鄰它前面的項目有效</li>
</ul>
<p><code class="language-text">(July|Jul) (fourth|4th|4)</code><br>
上面是匹配七月四日的寫法，七月可能是July或Jul，四日可能是fourth、4th或4<br>
以上的表達式可以使用「?」達到省略效果，以下表達式和上面表達式意義是相同的。<br>
<code class="language-text">(July?) (fourth|4th|4)</code> <br>
沒有|後代表括號部分不需要，也可省略，即等於<br>
<code class="language-text">July? (fourth|4th|4)</code><br>
如果?被放在括號()外，括號()的內容會被視為一個單位，即等於<br>
<code class="language-text">July? (fourth|4(th)?)</code></p>
<h3>其他量詞：反覆出現 「+」、「*」</h3>
<ul>
<li>+ 詮釋字元。代表“緊鄰前面的項目出現<strong>一次</strong>或<strong>多次</strong>” <code class="language-text">至少一定要出現一次！</code></li>
<li>* 詮釋字元。代表“緊鄰前面的項目出現<strong>任何次數</strong>，包含<strong>不出現</strong>”</li>
</ul>
<blockquote>
<p>「?」、「+」、「*」都代表量詞(quantifiers)，因為它們會影響掌管範圍的出現次數</p>
</blockquote></div></div></main></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-template-js","jsonName":"regex-89a","path":"/regex"};window.dataPath="621/path---regex-89-a-c88-RdaaTdyqqTUrfHsZnvaOcLEhGQ";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.319712d3e7fffa8163a7.css","/app-307c5ee6e9ff5d3a31a5.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-9e3bd79d15e1fb918a11.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-dae9f7e827e652b0bb68.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5ebd1c3f9b5a0997dd6c.js"],"component---src-pages-index-js":["/component---src-pages-index-js.c3ff835746e4b9d787cc.css","/component---src-pages-index-js-b222a3b98a86187ed300.js"],"component---src-pages-posts-js":["/component---src-pages-posts-js-8f269f4ab4ab73a4b26d.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-d5885076e50b83c8c1be.js"]};/*]]>*/</script><script src="/blog/webpack-runtime-5177511170e665f06203.js" async=""></script><script src="/blog/app-307c5ee6e9ff5d3a31a5.js" async=""></script><script src="/blog/0-02112589401d2e751f04.js" async=""></script><script src="/blog/component---src-templates-blog-template-js-9e3bd79d15e1fb918a11.js" async=""></script></body></html>